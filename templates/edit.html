{{ block "edit" . }}
{{ template "layout-head" . }}
{{ template "edit-form" . }}
{{ template "layout-foot" . }}
{{ end }}

{{ block "edit-form" . }}

<div class="flex flex-col items-center">
    <form action="/contacts/{{ .ID }}/edit" method="post">
        <div class="mb-[20px]"> <img class="size-30 shrink-0 object-cover rounded-full" alt="@hunvreus"
                src="https://github.com/hunvreus.png">
        </div>
        <fieldset class="form grid gap-6">
            <legend class="text-[30] font-bold mb-[10px]">Contact Values</legend>
            <div class="table rows">
                <p class="mb-[10px]">
                    <label for="email">Email</label>
                </p>
                <div class="flex flex-row gap-6 mb-[20px]">
                    <input class="w-80" name="email" id="email" type="email" hx-get="/contacts/{{ .ID }}/email"
                        hx-trigger="change, keyup delay:200ms changed" hx-target="next .error" placeholder="Email"
                        value="{{ .Email }}">
                    {{ template "error_email" . }}
                </div>

                <p class="mb-[10px]">
                    <label for="first_name">First Name</label>
                </p>
                <div class="flex flex-row gap-6 mb-[20px]"> <input class="w-80" name="first_name" id="first_name"
                        type="text" placeholder="First Name" value="{{ .First }}">
                    <span class="error">{{ index .Errors "first" }}</span>
                </div>

                <p class="mb-[10px]">
                    <label for="last_name">Last Name</label>
                </p>
                <div class="flex flex-row gap-6 mb-[20px]"> <input class="w-80" name="last_name" id="last_name"
                        type="text" placeholder="Last Name" value="{{ .Last }}">
                    <span class="error">{{ index .Errors "last" }}</span>
                </div>

                <p class="mb-[10px]">
                    <label for="phone">Phone</label>
                </p>
                <div class="flex flex-row gap-6 mb-[20px]"> <input class="w-80" name="phone" id="phone" type="text"
                        placeholder="Phone" value="{{ .Phone }}">
                    <span class="error">{{ index .Errors "phone" }}</span>
                </div>
            </div>
            <button class="btn-outline mt-[20px] w-17">Save</button>
            <div class="flex flex-row mt-[10px]">
                <p>
                    <a href="/contacts/" class="btn mr-[10px]">Back</a>
                </p>
                <button class="btn-destructive" id="delete-btn" hx-delete="/contacts/{{ .ID }}" hx-push-url="true"
                    hx-confirm="Are you sure you want to delete this contact?" hx-target="body"
                    hx-swap="outerHTML">Delete
                    Contact</button>
            </div>
        </fieldset>
    </form>
</div>

{{ end }}

{{ block "error_email" . }}
<span class="error">{{ index .Errors "email" }}</span>
{{end}}


{{ block "sucess-edit" . }}
<div class="alert">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="10" />
        <path d="m9 12 2 2 4-4" />
    </svg>
    <h2>Success! Your changes have been saved</h2>
    <section>This is an alert with icon, title and description.</section>
</div>
<script>
    setTimeout(() => {
        window.location.href = '/contacts/{{ .ID }}';
    }, 1000);
</script>
{{ end }}

{{ block "sucess-delete" . }}
<div class="alert w-150">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="10" />
        <path d="m9 12 2 2 4-4" />
    </svg>
    <h2>Contact deleted successfully</h2>
    <section>This is an alert with icon, title and description.</section>
</div>
<script>
    setTimeout(() => {
        window.location.href = '/contacts';
    }, 1000);
</script>
{{ end }}